(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{7607:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return n(8741)}])},7807:function(e,s,n){"use strict";n.d(s,{Z:function(){return j}});var t=n(5893),i=n(9008),r=n.n(i),c=n(1664),l=n.n(c),d=n(4173),a=n(4962);n(1691);var o=n(7294),h=n(4917),u=n(3299),x=function(e){let{href:s,children:n,...i}=e;return(0,t.jsx)(l(),{href:s,...i,children:n})},m=n(1955),j=function(e){let{title:s,children:n}=e,{status:i,data:c}=(0,u.useSession)(),{state:j,dispatch:f}=(0,o.useContext)(h.y),{cart:p}=j,[v,N]=(0,o.useState)(0);return(0,o.useEffect)(()=>{N(p.cartItems.reduce((e,s)=>e+s.quantity,0))},[p.cartItems]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r(),{children:[(0,t.jsx)("title",{children:s?s+" - App E-Commerce":"App E-Commerce"}),(0,t.jsx)("meta",{name:"description",content:"Application Web E-Commerce"})]}),(0,t.jsx)(d.Ix,{position:"bottom-center",limit:1}),(0,t.jsxs)("div",{className:"flex min-h-screen flex-col justify-between",children:[(0,t.jsx)("header",{children:(0,t.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,t.jsx)(l(),{href:"/",className:"text-lg font-bold",children:"samazone"}),(0,t.jsxs)("div",{className:"flex items-center z-10",children:[(0,t.jsxs)(l(),{href:"/cart",className:"p-2 text-blue-500",children:["Cart",v>0&&(0,t.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:v})]}),"loading"===i?"Loading":(null==c?void 0:c.user)?(0,t.jsxs)(a.v,{as:"div",className:"relative inline-block",children:[(0,t.jsx)(a.v.Button,{className:"text-blue-500",children:c.user.name}),(0,t.jsxs)(a.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-white  shadow-lg",children:[(0,t.jsx)(a.v.Item,{children:(0,t.jsx)(x,{className:"dropdown-link",href:"/profile",children:"Profile"})}),(0,t.jsx)(a.v.Item,{children:(0,t.jsx)(x,{className:"dropdown-link",href:"/order-history",children:"Order History"})}),c.user.isAdmin&&(0,t.jsx)(a.v.Item,{children:(0,t.jsx)(x,{className:"dropdown-link",href:"/admin/dashboard",children:"Admin Dashboard"})}),(0,t.jsx)(a.v.Item,{children:(0,t.jsx)("a",{className:"dropdown-link",href:"#",onClick:()=>{m.Z.remove("cart"),f({type:"CART_RESET"}),(0,u.signOut)({callbackUrl:"/login"})},children:"Logout"})})]})]}):(0,t.jsx)(l(),{href:"/login",className:"p-2 text-blue-500",children:"Login"})]})]})}),(0,t.jsx)("main",{className:"container m-auto mt-4 px-4",children:n}),(0,t.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:(0,t.jsx)("p",{children:"Copyright \xa9 2024"})})]})]})}},8741:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return m}});var t=n(5893),i=n(5675),r=n.n(i),c=n(1664),l=n.n(c),d=n(1163),a=n(7294),o=n(4917),h=n(7807),u=n(5121),x=n(4173),m=!0;s.default=function(e){let{product:s}=e,{state:n,dispatch:i}=(0,a.useContext)(o.y),c=(0,d.useRouter)();if(!s)return(0,t.jsx)(h.Z,{title:"Product Not Found",children:(0,t.jsx)("div",{children:"Product Not Found"})});let m=async()=>{let e=n.cart.cartItems.find(e=>e.slug===s.slug),t=e?e.quantity+1:1,{data:r}=await u.Z.get("/api/products/".concat(s._id));if(r.countInStock<t){x.Am.error("Sorry. Product is out of stock");return}i({type:"CART_ADD_ITEM",payload:{...s,quantity:t}}),x.Am.success("Product added to the cart"),c.push("/cart")};return(0,t.jsxs)(h.Z,{title:s.name,children:[(0,t.jsx)("div",{className:"my-2",children:(0,t.jsx)(l(),{href:"/",children:"Back to products"})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-3",children:[(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(r(),{src:s.image,alt:s.name,width:640,height:640,layout:"responsive"})}),(0,t.jsx)("div",{children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)("h1",{className:"text-lg",children:s.name})}),(0,t.jsxs)("li",{children:["Category: ",s.category]}),(0,t.jsxs)("li",{children:["Brand: ",s.brand]}),(0,t.jsxs)("li",{children:[s.rating," of ",s.numReviews," reviews"]}),(0,t.jsx)("li",{children:s.description})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"card p-5",children:[(0,t.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,t.jsx)("div",{children:"Price"}),(0,t.jsxs)("div",{children:["$",s.price]})]}),(0,t.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,t.jsx)("div",{children:"Status"}),(0,t.jsx)("div",{children:s.countInStock>0?"In Stock":"Unavailable"})]}),(0,t.jsx)("button",{className:"primary-button w-full",onClick:m,children:"Add to cart"})]})})]})]})}}},function(e){e.O(0,[128,121,675,888,774,179],function(){return e(e.s=7607)}),_N_E=e.O()}]);