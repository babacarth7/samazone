(()=>{var e={};e.id=405,e.ids=[405,888,660],e.modules={6030:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>y});var a=r(7093),n=r(5244),i=r(1323),c=r(1777),o=r.n(c),l=r(6719),d=r(1296),u=e([l,d]);[l,d]=u.then?(await u)():u;let p=(0,i.l)(d,"default"),m=(0,i.l)(d,"getStaticProps"),h=(0,i.l)(d,"getStaticPaths"),x=(0,i.l)(d,"getServerSideProps"),g=(0,i.l)(d,"config"),f=(0,i.l)(d,"reportWebVitals"),y=(0,i.l)(d,"unstable_getStaticProps"),j=(0,i.l)(d,"unstable_getStaticPaths"),S=(0,i.l)(d,"unstable_getStaticParams"),v=(0,i.l)(d,"unstable_getServerProps"),b=(0,i.l)(d,"unstable_getServerSideProps"),P=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:l.default,Document:o()},userland:d});s()}catch(e){s(e)}})},6873:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(997),a=r(1664),n=r.n(a);r(6689);let i=function(e){let{href:t,children:r,...a}=e;return s.jsx(n(),{href:t,...a,children:r})}},7397:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>f});var a=r(997),n=r(968),i=r.n(n),c=r(1664),o=r.n(c),l=r(3590),d=r(4962);r(8819);var u=r(6689),p=r(4917),m=r(1649),h=r(6873),x=r(9915),g=e([l,p,x]);[l,p,x]=g.then?(await g)():g;let f=function({title:e,children:t}){let{status:r,data:s}=(0,m.useSession)(),{state:n,dispatch:c}=(0,u.useContext)(p.y),{cart:g}=n,[f,y]=(0,u.useState)(0);return(0,u.useEffect)(()=>{y(g.cartItems.reduce((e,t)=>e+t.quantity,0))},[g.cartItems]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[a.jsx("title",{children:e?e+" - App E-Commerce":"App E-Commerce"}),a.jsx("meta",{name:"description",content:"Application Web E-Commerce"})]}),a.jsx(l.ToastContainer,{position:"bottom-center",limit:1}),(0,a.jsxs)("div",{className:"flex min-h-screen flex-col justify-between",children:[a.jsx("header",{children:(0,a.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[a.jsx(o(),{href:"/",className:"text-lg font-bold",children:"samazone"}),(0,a.jsxs)("div",{className:"flex items-center z-10",children:[(0,a.jsxs)(o(),{href:"/cart",className:"p-2 text-blue-500",children:["Cart",f>0&&a.jsx("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:f})]}),"loading"===r?"Loading":s?.user?(0,a.jsxs)(d.v,{as:"div",className:"relative inline-block",children:[a.jsx(d.v.Button,{className:"text-blue-500",children:s.user.name}),(0,a.jsxs)(d.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-white  shadow-lg",children:[a.jsx(d.v.Item,{children:a.jsx(h.Z,{className:"dropdown-link",href:"/profile",children:"Profile"})}),a.jsx(d.v.Item,{children:a.jsx(h.Z,{className:"dropdown-link",href:"/order-history",children:"Order History"})}),s.user.isAdmin&&a.jsx(d.v.Item,{children:a.jsx(h.Z,{className:"dropdown-link",href:"/admin/dashboard",children:"Admin Dashboard"})}),a.jsx(d.v.Item,{children:a.jsx("a",{className:"dropdown-link",href:"#",onClick:()=>{x.default.remove("cart"),c({type:"CART_RESET"}),(0,m.signOut)({callbackUrl:"/login"})},children:"Logout"})})]})]}):a.jsx(o(),{href:"/login",className:"p-2 text-blue-500",children:"Login"})]})]})}),a.jsx("main",{className:"container m-auto mt-4 px-4",children:t}),a.jsx("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:a.jsx("p",{children:"Copyright \xa9 2024"})})]})]})};s()}catch(e){s(e)}})},9528:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>p});var a=r(997),n=r(1664),i=r.n(n),c=r(6689),o=r(4917),l=r(1163),d=r(3590),u=e([o,d]);[o,d]=u.then?(await u)():u;let p=function({product:e}){let{state:t,dispatch:r}=(0,c.useContext)(o.y),s=(0,l.useRouter)();return(0,a.jsxs)("div",{className:"card",children:[a.jsx(i(),{href:`/product/${e.slug}`,children:a.jsx("img",{src:e.image,alt:e.name,className:"rounded shadow object-cover h-64 w-full"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-5",children:[a.jsx(i(),{href:`/product/${e.slug}`,children:a.jsx("h2",{className:"text-lg",children:e.name})}),a.jsx("p",{className:"mb-2",children:e.brand}),(0,a.jsxs)("p",{children:["$",e.price]}),a.jsx("button",{className:"primary-button",type:"button",onClick:()=>{let a=t.cart.cartItems.find(t=>t.slug===e.slug),n=a?a.quantity+1:1;if(e.countInStock<n){d.toast.error("Sorry. Product is out of stock");return}r({type:"CART_ADD_ITEM",payload:{...e,quantity:n}}),d.toast.success("Product added to the cart"),s.push("/cart")},children:"Add to cart"})]})]})};s()}catch(e){s(e)}})},8887:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(1185),a=r.n(s);let n=new(a()).Schema({name:{type:String,required:!0},slug:{type:String,required:!0,unique:!0},category:{type:String,required:!0},image:{type:String,required:!0},price:{type:Number,required:!0},brand:{type:String,required:!0},rating:{type:Number,required:!0,default:0},numReviews:{type:Number,required:!0,default:0},countInStock:{type:Number,required:!0,default:0},description:{type:String,required:!0},isFeatured:{type:Boolean,default:!1},banner:String},{timestamps:!0}),i=a().models.Product||a().model("Product",n)},6719:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>u});var a=r(997);r(6764);var n=r(1649),i=r(4917),c=r(1163),o=r(2929),l=e([i]);function d({children:e,adminOnly:t}){let r=(0,c.useRouter)(),{status:s,data:i}=(0,n.useSession)({required:!0,onUnauthenticated(){r.push("/unauthorized?message=login required")}});return"loading"===s?a.jsx("div",{children:"Loading..."}):(t&&!i.user.isAdmin&&r.push("/unauthorized?message=admin login required"),e)}i=(l.then?(await l)():l)[0];let u=function({Component:e,pageProps:{session:t,...r}}){return a.jsx(n.SessionProvider,{session:t,children:a.jsx(i.Z,{children:a.jsx(o.PayPalScriptProvider,{children:e.auth?a.jsx(d,{adminOnly:e.auth.adminOnly,children:a.jsx(e,{...r})}):a.jsx(e,{...r})})})})};s()}catch(e){s(e)}})},1296:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>g,getServerSideProps:()=>x});var a=r(997),n=r(6689),i=r(7397),c=r(9528),o=r(8887),l=r(5904),d=r(4917),u=r(4508);r(3559);var p=r(1664),m=r.n(p),h=e([i,c,d]);async function x(){await l.Z.connect();let e=await o.Z.find().lean();return{props:{featuredProducts:(await o.Z.find({isFeatured:!0}).lean()).map(l.Z.convertDocToObj),products:e.map(l.Z.convertDocToObj)}}}[i,c,d]=h.then?(await h)():h;let g=function({products:e,featuredProducts:t}){let{state:r,dispatch:s}=(0,n.useContext)(d.y),{cart:o}=r;return(0,a.jsxs)(i.Z,{title:"Home Page",children:[a.jsx(u.Carousel,{showThumbs:!1,autoPlay:!0,children:t.map(e=>a.jsx("div",{children:a.jsx(m(),{href:`/product/${e.slug}`,passHref:!0,className:"flex",children:a.jsx("img",{src:e.banner,alt:e.name})})},e._id))}),a.jsx("h2",{className:"h2 my-4",children:"Latest Products"}),a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 lg:grid-cols-4",children:e.map(e=>a.jsx(c.Z,{product:e},e.slug))})]})};s()}catch(e){s(e)}})},4917:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>u,y:()=>l});var a=r(997),n=r(6689),i=r(9915),c=e([i]);i=(c.then?(await c)():c)[0];let l=(0,n.createContext)(),d={cart:i.default.get("cart")?JSON.parse(i.default.get("cart")):{cartItems:[],shippingAddress:{}}};function o(e,t){switch(t.type){case"CART_ADD_ITEM":{let r=t.payload,s=e.cart.cartItems.find(e=>e.slug===r.slug),a=s?e.cart.cartItems.map(e=>e.name===s.name?r:e):[...e.cart.cartItems,r];return i.default.set("cart",JSON.stringify({...e.cart,cartItems:a})),{...e,cart:{...e.cart,cartItems:a}}}case"CART_REMOVE_ITEM":{let r=e.cart.cartItems.filter(e=>e.slug!==t.payload.slug);return i.default.set("cart",JSON.stringify({...e.cart,cartItems:r})),{...e,cart:{...e.cart,cartItems:r}}}case"CART_RESET":return{...e,cart:{cartItems:[],shippingAddress:{location:{}},paymentMethod:""}};case"CART_CLEAR_ITEMS":return{...e,cart:{...e.cart,cartItems:[]}};case"SAVE_SHIPPING_ADDRESS":return{...e,cart:{...e.cart,shippingAddress:{...e.cart.shippingAddress,...t.payload}}};case"SAVE_PAYMENT_METHOD":return{...e,cart:{...e.cart,paymentMethod:t.payload}};default:return e}}let u=function({children:e}){let[t,r]=(0,n.useReducer)(o,d);return a.jsx(l.Provider,{value:{state:t,dispatch:r},children:e})};s()}catch(e){s(e)}})},5904:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(1185),a=r.n(s);let n={},i={connect:async function(){if(n.isConnected){console.log("already connected");return}if(a().connections.length>0){if(n.isConnected=a().connections[0].readyState,1===n.isConnected){console.log("use previous connection");return}await a().disconnect()}let e=await a().connect(process.env.MONGODB_URI);console.log("new connection"),n.isConnected=e.connections[0].readyState},disconnect:async function(){n.isConnected&&(await a().disconnect(),n.isConnected=!1)},convertDocToObj:function(e){return e._id=e._id.toString(),e.createdAt=e.createdAt.toString(),e.updatedAt=e.updatedAt.toString(),e}}},3559:()=>{},6764:()=>{},2929:e=>{"use strict";e.exports=require("@paypal/react-paypal-js")},1185:e=>{"use strict";e.exports=require("mongoose")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},4508:e=>{"use strict";e.exports=require("react-responsive-carousel")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9915:e=>{"use strict";e.exports=import("js-cookie")},3590:e=>{"use strict";e.exports=import("react-toastify")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[255,163,777,176],()=>r(6030));module.exports=s})();